(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{1154:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1243:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1502:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),l=s(2115),r=s(8482),o=s(1154),c=s(1243),n=s(7108),d=s(9881),i=s(8832),h=s(2525),m=s(7580),u=s(3227);function x(){let[e,t]=(0,l.useState)({totalItems:0,stockInCount:0,stockOutCount:0,deadStockCount:0,usersCount:0,departmentsCount:0}),[s,x]=(0,l.useState)([]),[f,p]=(0,l.useState)([]),[y,g]=(0,l.useState)(!0),[j,k]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{try{g(!0),k("");let e=async e=>{try{console.log("Fetching from: ".concat(e));let t=await fetch(e);if(!t.ok)return console.warn("Failed to fetch from ".concat(e,": ").concat(t.status)),[];{let s=await t.json();return console.log("Data from ".concat(e,":"),s),s}}catch(t){return console.warn("Error fetching from ".concat(e,":"),t),[]}},[s,a,l,r]=await Promise.all([e("http://localhost:5000/api/items/get"),e("http://localhost:5000/api/deadstocks/get"),e("http://localhost:5000/api/users/get"),e("http://localhost:5000/api/departments/get")]),o=new Map;s.forEach(e=>{o.set(e._id,e)}),console.log("Items map created:",o.size,"items");let c=[];for(let t of["http://localhost:5000/api/stockins/get","http://localhost:5000/api/stock-ins/get","http://localhost:5000/api/stockin/get","http://localhost:5000/api/stock-in/get"])if((c=await e(t)).length>0){console.log("Successfully fetched stock in data from: ".concat(t));break}let n=[];for(let t of["http://localhost:5000/api/stockouts/get","http://localhost:5000/api/stock-outs/get","http://localhost:5000/api/stockout/get","http://localhost:5000/api/stock-out/get"])if((n=await e(t)).length>0){console.log("Successfully fetched stock out data from: ".concat(t));break}console.log("Final data:",{items:s.length,stockIn:c.length,stockOut:n.length,deadstock:a.length,users:l.length,departments:r.length});let d=new Date().getMonth(),i=new Date().getFullYear(),h=c.filter(e=>{let t=e.received_at||e.date||e.created_at||e.createdAt;if(!t)return!1;let s=new Date(t);return s.getMonth()===d&&s.getFullYear()===i}),m=n.filter(e=>{let t=e.issued_at||e.date||e.created_at||e.createdAt;if(!t)return!1;let s=new Date(t);return s.getMonth()===d&&s.getFullYear()===i});t({totalItems:s.length,stockInCount:h.length,stockOutCount:m.length,deadStockCount:a.length,usersCount:l.length,departmentsCount:r.length}),console.log("Processing Stock In Data:",c.slice(0,3));let u=c.sort((e,t)=>{let s=new Date(e.received_at||e.date||e.created_at||e.createdAt||0);return new Date(t.received_at||t.date||t.created_at||t.createdAt||0).getTime()-s.getTime()}).slice(0,3).map(e=>{let t=e.product_id||e.item_id||e.itemId||e.productId||e.item,s=t?o.get(t):null;return console.log("Stock In - Product ID: ".concat(t,", Found Item:"),s),{_id:e._id||Math.random().toString(),item_name:s?s.name:t||"Unknown Item",quantity:e.quantity||e.qty||0,received_at:e.received_at||e.date||e.created_at||e.createdAt,supplier:e.supplier||e.vendor||e.from}});x(u),console.log("Processing Stock Out Data:",n.slice(0,3));let f=n.sort((e,t)=>{let s=new Date(e.issued_at||e.date||e.created_at||e.createdAt||0);return new Date(t.issued_at||t.date||t.created_at||t.createdAt||0).getTime()-s.getTime()}).slice(0,3).map(e=>{let t=e.product_id||e.item_id||e.itemId||e.productId||e.item,s=t?o.get(t):null;return console.log("Stock Out - Product ID: ".concat(t,", Found Item:"),s),{_id:e._id||Math.random().toString(),item_name:s?s.name:t||"Unknown Item",quantity:e.quantity||e.qty||0,issued_at:e.issued_at||e.date||e.created_at||e.createdAt,user_name:e.user_name||e.userName||e.requestedBy||e.issuedTo||"Unknown User",user_role:e.user_role||e.userRole||e.role||"Unknown"}});p(f),console.log("Final processed data:",{recentStockIn:u,recentStockOut:f})}catch(e){console.error("Error fetching dashboard data:",e),k("Some data could not be loaded. Please check your API connections.")}finally{g(!1)}})()},[]);let N=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A";return y?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:"#51247a"},children:"Dashboard"}),(0,a.jsx)("p",{style:{color:"#666"},children:"Overall inventory system status"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"w-8 h-8 animate-spin mx-auto mb-4",style:{color:"#51247a"}}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})]}):j?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:"#51247a"},children:"Dashboard"}),(0,a.jsx)("p",{style:{color:"#666"},children:"Overall inventory system status"})]}),(0,a.jsx)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,a.jsx)(r.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center text-red-600",children:[(0,a.jsx)(c.A,{className:"w-8 h-8 mx-auto mb-4"}),(0,a.jsx)("p",{className:"font-medium",children:"Error loading dashboard"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:j}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Retry"})]})})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:"#51247a"},children:"Dashboard"}),(0,a.jsx)("p",{style:{color:"#666"},children:"Overall inventory system status"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",style:{color:"#666"},children:"Total Items"}),(0,a.jsx)(n.A,{className:"h-4 w-4",style:{color:"#51247a"}})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.totalItems.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs",style:{color:"#666"},children:"Various categories"})]})]}),(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",style:{color:"#666"},children:"Stock In"}),(0,a.jsx)(d.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.stockInCount.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs",style:{color:"#666"},children:"This month"})]})]}),(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",style:{color:"#666"},children:"Stock Out"}),(0,a.jsx)(i.A,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.stockOutCount.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs",style:{color:"#666"},children:"This month"})]})]}),(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",style:{color:"#666"},children:"Dead Stock"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-orange-600"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.deadStockCount.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs",style:{color:"#666"},children:"Total"})]})]}),(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",style:{color:"#666"},children:"Users"}),(0,a.jsx)(m.A,{className:"h-4 w-4",style:{color:"#002147"}})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.usersCount.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs",style:{color:"#666"},children:"Active"})]})]}),(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",style:{color:"#666"},children:"Departments"}),(0,a.jsx)(u.A,{className:"h-4 w-4",style:{color:"#51247a"}})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.departmentsCount.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs",style:{color:"#666"},children:"Total"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{style:{color:"#51247a"},children:"Recent Stock In"}),(0,a.jsx)(r.BT,{style:{color:"#666"},children:"Latest stock entries"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:s.length>0?s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",style:{color:"#51247a"},children:e.item_name}),(0,a.jsxs)("p",{className:"text-sm",style:{color:"#666"},children:[N(e.received_at),e.supplier&&" - ".concat(e.supplier)]})]}),(0,a.jsxs)("div",{className:"text-green-600 font-semibold",children:["+",e.quantity]})]},e._id)):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent stock entries"})})})]}),(0,a.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{style:{color:"#51247a"},children:"Recent Stock Out"}),(0,a.jsx)(r.BT,{style:{color:"#666"},children:"Latest stock issues"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:f.length>0?f.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",style:{color:"#51247a"},children:e.item_name}),(0,a.jsxs)("p",{className:"text-sm",style:{color:"#666"},children:[N(e.issued_at)," - ",e.user_name," (",e.user_role,")"]})]}),(0,a.jsxs)("div",{className:"text-red-600 font-semibold",children:["-",e.quantity]})]},e._id)):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent stock issues"})})})]})]})]})}},2122:(e,t,s)=>{Promise.resolve().then(s.bind(s,1502))},2525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3227:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2596),l=s(9688);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},7108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7580:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>i,ZB:()=>n,Zp:()=>o,aR:()=>c});var a=s(5155),l=s(2115),r=s(3999);let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});o.displayName="Card";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})});c.displayName="CardHeader";let n=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});n.displayName="CardTitle";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})});d.displayName="CardDescription";let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...l})});i.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter"},8832:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},9881:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:n,className:d="",children:i,iconNode:h,...m}=e;return(0,a.createElement)("svg",{ref:t,...o,width:l,height:l,stroke:s,strokeWidth:n?24*Number(c)/Number(l):c,className:r("lucide",d),...m},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(i)?i:[i]])}),n=(e,t)=>{let s=(0,a.forwardRef)((s,o)=>{let{className:n,...d}=s;return(0,a.createElement)(c,{ref:o,iconNode:t,className:r("lucide-".concat(l(e)),n),...d})});return s.displayName="".concat(e),s}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,441,684,358],()=>t(2122)),_N_E=e.O()}]);